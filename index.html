<!DOCTYPE html>
<html>
<head>
    <title>Leads Analyzer</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body { font-family: Arial; padding: 20px; text-align: center; }
        #results { margin-top: 20px; text-align: left; }
        .button { 
            background: #0088cc; color: white; 
            padding: 10px 15px; border: none; border-radius: 5px;
        }
    </style>
</head>
<body>
    <h2>üîç –ê–Ω–∞–ª–∏–∑ –ª–∏–¥–æ–≤</h2>
    <input type="file" id="fileInput" accept=".xlsx">
    <button class="button" onclick="processFile()">–ü—Ä–æ–≤–µ—Ä–∏—Ç—å</button>
    <div id="results"></div>

    <script>
        function processFile() {
            const fileInput = document.getElementById('fileInput');
            const file = fileInput.files[0];
            if (!file) return alert("–í—ã–±–µ—Ä–∏—Ç–µ —Ñ–∞–π–ª!");

            const reader = new FileReader();
            reader.onload = function(e) {
                const data = e.target.result;
                analyzeData(data);
            };
            reader.readAsArrayBuffer(file);
        }

        function analyzeData(fileData) {
            Telegram.WebApp.showAlert("–§–∞–π–ª –ø–æ–ª—É—á–µ–Ω, –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ–º...");
            
            // –ó–¥–µ—Å—å –±—É–¥–µ—Ç –æ—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ –≤–∞—à –±—ç–∫–µ–Ω–¥
            const result = {
                duplicates: 12,
                uniques: 34,
                sample: ["test@mail.com", "+123456789"]
            };
            
            displayResults(result);
        }

        function displayResults(data) {
            const resultsDiv = document.getElementById('results');
            resultsDiv.innerHTML = `
                <h3>–†–µ–∑—É–ª—å—Ç–∞—Ç—ã:</h3>
                <p>–î—É–±–ª–∏–∫–∞—Ç–æ–≤: ${data.duplicates}</p>
                <p>–£–Ω–∏–∫–∞–ª—å–Ω—ã—Ö: ${data.uniques}</p>
                <p>–ü—Ä–∏–º–µ—Ä—ã: ${data.sample.join(", ")}</p>
            `;
            
            // –û—Ç–ø—Ä–∞–≤–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ Telegram
            Telegram.WebApp.sendData(JSON.stringify(data));
        }

        Telegram.WebApp.ready();
        Telegram.WebApp.expand();
    </script>
</body>
</html>
